<template>
  <div class="common-layout">
    <el-container>
      <el-aside :width="isCollapse == false ? '12rem' : '6rem'" class="aside">
        <div class="logo">
          <img src="~@/assets/logo.png" alt="" />
          <h2 class="title">HR</h2>
        </div>

        <el-menu
          unique-opened
          default-active="this.$route.path"
          :collapse="isCollapse"
          :collapse-transition="false"
          @open="handleOpen"
          @close="handleClose"
          @select="handleSelect"
          :router="true"
        >
          <!-- <el-sub-menu index="1">
            <template #title>
              <el-icon><Location /></el-icon>
              <span>数据类型</span>
            </template>
            <el-menu-item index="1-1">Excel表格</el-menu-item>
            <el-menu-item index="1-2">柱状图</el-menu-item>
            <el-menu-item index="1-3">饼图</el-menu-item>
            <el-menu-item index="1-4">散点图</el-menu-item>
          </el-sub-menu> -->

          <!-- <el-sub-menu index="3">
            <template #title>
              <el-icon><Document /></el-icon>
              <span>查看类型</span>
            </template>

            <el-menu-item index="3-2">项目考核</el-menu-item>
            <el-menu-item index="3-3">绩点</el-menu-item>
            <el-menu-item index="3-4">KPI</el-menu-item>
          </el-sub-menu> -->

          <!-- <el-sub-menu index="4">
            <template #title>
              <el-icon><Setting /></el-icon>
              <span>时间</span>
            </template>
            <el-menu-item index="4-1">年</el-menu-item>
            <el-menu-item index="4-2">季</el-menu-item>
            <el-menu-item index="4-3">月</el-menu-item>
          </el-sub-menu> -->
          <el-menu-item index="mainHome" v-if="$store.state.role == 'ROOT'">
            <template #title>
              <!-- <el-icon><Tickets /></el-icon> -->
              <el-icon><Coordinate /></el-icon>
              <span>主页</span>
            </template>
          </el-menu-item>
          <el-sub-menu index="kpi" v-if="$store.state.role == 'ROOT'">
            <template #title>
              <el-icon><Tickets /></el-icon>
              <span>kpi管理</span>
            </template>
            <el-menu-item index="/kpidept" v-if="$store.state.role == 'ROOT'">查询kpi数值</el-menu-item>
          </el-sub-menu>
          <el-sub-menu index="event" v-if="$store.state.role == 'ROOT'">
            <template #title>
              <el-icon><Tickets /></el-icon>
              <span>事件管理</span>
            </template>
            <el-menu-item index="/createModel" v-if="$store.state.role == 'ROOT'">事件发布</el-menu-item>
            <el-menu-item index="/publishhistory" v-if="$store.state.role == 'ROOT'">发布历史与流程详情</el-menu-item>
          </el-sub-menu>

          <el-sub-menu index="6" v-if="$store.state.role == 'ROOT'">
            <template #title>
              <el-icon><UserFilled /></el-icon>
              <span>价值观管理</span>
            </template>
            <!-- <el-sub-menu index="7" v-if="$store.state.role == 'HR' || $store.state.role == 'MANAGER'">
              <template #title>
                <el-icon><Menu /></el-icon>
                <span>查询价值观</span>
              </template>
              <el-menu-item index="/valueDept">部门</el-menu-item>
              <el-menu-item index="/valueUser">个人</el-menu-item>
            </el-sub-menu> -->

            <el-menu-item index="/deptcommon">常用部门审批流程</el-menu-item>
            <el-menu-item index="/hrcommon">常用人事审批流程</el-menu-item>
            <el-menu-item index="/valuemanage">价值观管理</el-menu-item>
            <el-menu-item index="/valueDept">查询价值观</el-menu-item>
          </el-sub-menu>
          <el-menu-item index="/valueUser" v-if="$store.state.role != 'ROOT'">
            <template #title>
              <el-icon><List /></el-icon>
              <span>查询个人价值观</span>
            </template>
          </el-menu-item>
          <el-sub-menu index="7" v-if="$store.state.role == 'ROOT'">
            <template #title>
              <el-icon><List /></el-icon>
              <span>业绩管理</span>
            </template>
            <el-menu-item index="/targetlist">指标列表</el-menu-item>
            <el-menu-item index="/targetapproval">业绩审批流程</el-menu-item>
            <el-menu-item index="/performancedept">查询业绩数据</el-menu-item>
            <!-- <el-menu-item index="/download">下载模板</el-menu-item> -->
          </el-sub-menu>
          <el-sub-menu index="5" v-if="$store.state.role == 'ROOT' || $store.state.role == 'HR'">
            <template #title>
              <el-icon><UserFilled /></el-icon>
              <span>用户管理</span>
            </template>
            <el-menu-item index="/userlist">用户列表</el-menu-item>
          </el-sub-menu>
          <el-menu-item index="/searchlog" v-if="$store.state.role == 'ROOT'">
            <template #title>
              <el-icon><Tickets /></el-icon>
              <span>查询操作日志</span>
            </template>
          </el-menu-item>
        </el-menu>
        <!-- <el-radio-group v-model="isCollapse">
          <el-radio-button :label="false">expand</el-radio-button>
          <el-radio-button :label="true">collapse</el-radio-button>
        </el-radio-group> -->
      </el-aside>
      <el-container class="mainHeight">
        <el-header>
          <div class="siderOpen">
            <el-icon :size="20" v-if="isCollapse === false" @click="isCollapse = !isCollapse"><Expand /></el-icon>
            <el-icon :size="20" v-if="isCollapse === true" @click="triggerSidebarOpened"><Fold /></el-icon>
          </div>
          <Header></Header>
        </el-header>
        <el-main>
          <!-- <Main></Main> -->
          <router-view />
        </el-main>
        <!-- <el-footer>
          凯韵科技有限公司
          <br />
          2023年8月
        </el-footer> -->
      </el-container>
    </el-container>
  </div>
</template>

<script>
import { UserFilled, Expand, Fold, Tickets, List, Coordinate } from "@element-plus/icons-vue";
import Header from "../components/header/HeaderView.vue";
// import Main from "@/components/main/MainHome.vue";
// import store from "@/store";

export default {
  components: { Header, UserFilled, Expand, Fold, Tickets, List, Coordinate },
  data() {
    return {
      isCollapse: false,
      width: "200px",

      collapsed: {
        type: Boolean,
      },
    };
  },

  methods: {
    handleOpen(key, keyPath) {
      console.log(key, keyPath);
    },
    handleClose(key, keyPath) {
      console.log(key, keyPath);
    },
    handleSelect(key, keyPath) {
      console.log(key, keyPath);
    },
    triggerSidebarOpened() {
      this.isCollapse = !this.isCollapse;
    },
  },
};
</script>
<style lang="scss">
html {
  background-color: #f0f2f5;
  // background-color: red;
}
.common-layout {
  height: 100vh;
}

.logo {
  // width: 200/16rem;
  display: flex;
  justify-content: center;
  align-items: center;
  height: 3.75rem;
  line-height: 3.75rem;
  // background-color: #fff;
  img {
    height: 2rem;
    margin-right: 0.5rem;
  }
  h2 {
    color: rgb(191, 203, 217);
  }
}
.el-menu-vertical-demo:not(.el-menu--collapse) {
  width: 12rem;
}
.aside {
  height: 100vh;
  background-color: #304156;
  color: rgb(191, 203, 217);
}
.mainHeight {
  height: 100vh;
}
.el-menu {
  border-right: 0 !important;
  .el-sub-menu__title,
  .el-menu-item,
  .el-menu-item .el-menu-tooltip__trigger {
    padding-left: 2rem;
    background-color: #304156;
    color: rgb(191, 203, 217);
  }
}
// .el-menu-item {
//   background-color: #304156;
//   color: rgb(191, 203, 217);
// }
.el-header {
  background-color: #fff;
  display: flex;
  align-items: center;
  .siderOpen {
    margin-top: 0.25rem;
    padding-right: 0.5rem;
  }
}
.el-footer {
  font-size: 0.5rem;
}
</style>
